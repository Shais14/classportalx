<p id="notice"><%= notice %></p>

<h1>Students in <%= Course.find(params[:course_id]).title%></h1>

<table>
  <thead>
    <tr>
      <% if current_user.type == "Admin" || current_user.type == "SuperAdmin" ||  current_user.type == "Instructor" %>
        <th>Student Name</th>
      <% end %>
      <th>Course Title</th>
      <th>Grade</th>
      <% if current_user.type == "Admin" || current_user.type == "SuperAdmin" ||  current_user.type == "Instructor"%>
        <th>Actions</th>
        <th colspan="4"></th>
      <% else %>
        <th colspan="3"></th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% @students_courses.each do |student_course| %>
      <tr>
        <% if current_user.type == "Admin" || current_user.type == "SuperAdmin" || current_user.type == "Instructor" %>
          <td><%= Student.find(student_course.student_id).name %></td>
        <% end %>
        <td><%= Course.find(student_course.course_id).title %></td>
        <td><%= student_course.grade %></td>
        <% if current_user.type == "Admin"|| current_user.type == "SuperAdmin" %>
          <% if student_course.grade.blank? %>
            <td><%= link_to 'Post grade', "/student_courses/#{student_course.id}/edit"  %></td>
          <% else %>
            <td><%= link_to 'Edit grade', "/student_courses/#{student_course.id}/edit"  %></td>
          <% end %>
          <td><%= link_to 'Drop', student_course, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<% if current_user.type == "Admin" || current_user.type == "SuperAdmin" || current_user.type == "Instructor" %>
  <%= link_to 'Post a grade', new_grade_path %>
<% end %>